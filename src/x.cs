using System;
using System.Collections.Generic;
using System.Reflection;
using UnityEngine;
using WeTest.U3DAutomation;

internal class x
{
	public static readonly string a;

	public static readonly string b;

	public static readonly string c;

	public static readonly string d;

	public static readonly string e;

	public static readonly string f;

	public static readonly string g;

	public static readonly string h;

	public static readonly string i;

	public static readonly string j;

	public static readonly string k;

	public static readonly string l;

	public static readonly string m;

	public static readonly string n;

	public static readonly string o;

	public static readonly string p;

	public static readonly string q;

	public static readonly string r;

	public static readonly string s;

	public static readonly string t;

	public static readonly string u;

	public static readonly string v;

	public static readonly string w;

	public static readonly string x;

	private static Type y;

	private static Type z;

	private static Type aa;

	private static Type ab;

	private static Type ac;

	private static Type ad;

	private static Type ae;

	private static Type af;

	private static Type ag;

	private static Type ah;

	private static Type ai;

	private static Type aj;

	private static BetterList<e> ak;

	static x()
	{
		global::x.a = "UIRoot, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.b = "UICamera, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.c = "UIPanel, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.d = "UIButton, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.e = "UIToggle, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.f = "UIEventListener, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.g = "UIWidget, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.h = "UIRect, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.i = "UILabel, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.j = "UIInput, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.k = "UITexture, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.l = "UISprite, Assembly-CSharp, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.m = "UIRoot, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.n = "UICamera, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.o = "UIPanel, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.p = "UIButton, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.q = "UIToggle, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.r = "UIEventListener, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.s = "UIWidget, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.t = "UIRect, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.u = "UILabel, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.v = "UIInput, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.w = "UITexture, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.x = "UISprite, Assembly-CSharp-firstpass, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null";
		global::x.y = null;
		global::x.z = null;
		global::x.aa = null;
		global::x.ab = null;
		global::x.ac = null;
		global::x.ad = null;
		global::x.ae = null;
		global::x.af = null;
		global::x.ag = null;
		global::x.ah = null;
		global::x.ai = null;
		global::x.aj = null;
		global::x.ak = new BetterList<e>();
		try
		{
			global::x.y = Type.GetType(global::x.a);
			if (global::x.af == null)
			{
				global::x.y = Type.GetType(global::x.m);
			}
			global::x.z = Type.GetType(global::x.b);
			if (global::x.z == null)
			{
				global::x.z = Type.GetType(global::x.n);
			}
			global::x.aa = Type.GetType(global::x.c);
			if (global::x.aa == null)
			{
				global::x.aa = Type.GetType(global::x.o);
			}
			global::x.ab = Type.GetType(global::x.d);
			if (global::x.ab == null)
			{
				global::x.ab = Type.GetType(global::x.p);
			}
			global::x.ac = Type.GetType(global::x.e);
			if (global::x.ac == null)
			{
				global::x.ac = Type.GetType(global::x.q);
			}
			global::x.ad = Type.GetType(global::x.f);
			if (global::x.ad == null)
			{
				global::x.ad = Type.GetType(global::x.r);
			}
			global::x.ae = Type.GetType(global::x.g);
			if (global::x.ae == null)
			{
				global::x.ae = Type.GetType(global::x.s);
			}
			global::x.af = Type.GetType(global::x.h);
			if (global::x.af == null)
			{
				global::x.af = Type.GetType(global::x.t);
			}
			global::x.ag = Type.GetType(global::x.i);
			if (global::x.af == null)
			{
				global::x.af = Type.GetType(global::x.u);
			}
			global::x.ah = Type.GetType(global::x.j);
			if (global::x.af == null)
			{
				global::x.af = Type.GetType(global::x.v);
			}
			global::x.ai = Type.GetType(global::x.k);
			if (global::x.ai == null)
			{
				global::x.ai = Type.GetType(global::x.w);
			}
			global::x.aj = Type.GetType(global::x.l);
			if (global::x.aj == null)
			{
				global::x.aj = Type.GetType(global::x.x);
			}
		}
		catch (Exception ex)
		{
			global::u.a("NGUITool init error =>" + ex.Message + "\n" + ex.StackTrace);
		}
	}

	public static string e(GameObject A_0)
	{
		object componentAttribute = ReflectionTools.GetComponentAttribute(A_0, global::x.ag, "text");
		if (componentAttribute != null)
		{
			return (string)componentAttribute;
		}
		componentAttribute = ReflectionTools.GetComponentAttribute(A_0, global::x.ah, "value");
		if (componentAttribute != null)
		{
			return (string)componentAttribute;
		}
		return null;
	}

	public static List<string> d(GameObject A_0)
	{
		List<string> list = new List<string>();
		List<object> componentInChildrenAttribute = ReflectionTools.GetComponentInChildrenAttribute(A_0, global::x.ag, "text");
		if (componentInChildrenAttribute != null)
		{
			for (int i = 0; i < componentInChildrenAttribute.Count; i++)
			{
				if (componentInChildrenAttribute[i] != null)
				{
					list.Add((string)componentInChildrenAttribute[i]);
				}
			}
		}
		componentInChildrenAttribute = ReflectionTools.GetComponentInChildrenAttribute(A_0, global::x.ah, "text");
		if (componentInChildrenAttribute != null)
		{
			for (int j = 0; j < componentInChildrenAttribute.Count; j++)
			{
				if (componentInChildrenAttribute[j] != null)
				{
					list.Add((string)componentInChildrenAttribute[j]);
				}
			}
		}
		return list;
	}

	public static string c(GameObject A_0)
	{
		if (A_0 == null)
		{
			return null;
		}
		object componentAttribute = ReflectionTools.GetComponentAttribute(A_0, global::x.ai, "mainTexture");
		if (componentAttribute != null)
		{
			Texture texture = (Texture)componentAttribute;
			return texture.name;
		}
		object componentAttribute2 = ReflectionTools.GetComponentAttribute(A_0, global::x.aj, "spriteName");
		if (componentAttribute2 != null)
		{
			return (string)componentAttribute2;
		}
		return null;
	}

	public static List<string> b(GameObject A_0)
	{
		List<string> list = new List<string>();
		List<object> componentInChildrenAttribute = ReflectionTools.GetComponentInChildrenAttribute(A_0, global::x.ai, "mainTexture");
		if (componentInChildrenAttribute != null)
		{
			for (int i = 0; i < componentInChildrenAttribute.Count; i++)
			{
				Texture texture = (Texture)componentInChildrenAttribute[i];
				list.Add(texture.name);
			}
		}
		List<object> componentInChildrenAttribute2 = ReflectionTools.GetComponentInChildrenAttribute(A_0, global::x.aj, "spriteName");
		if (componentInChildrenAttribute2 != null)
		{
			for (int j = 0; j < componentInChildrenAttribute2.Count; j++)
			{
				if (componentInChildrenAttribute2[j] != null)
				{
					list.Add((string)componentInChildrenAttribute2[j]);
				}
			}
		}
		return list;
	}

	private static float a(Vector3 A_0, Vector3 A_1)
	{
		return (float)Math.Sqrt((double)(Math.Abs(A_0.x - A_1.x) * Math.Abs(A_0.x - A_1.x) + Math.Abs(A_0.y - A_1.y) * Math.Abs(A_0.y - A_1.y)));
	}

	public static Rectangle a(Camera A_0, GameObject A_1)
	{
		Vector3[] array = (Vector3[])ReflectionTools.GetComponentAttribute(A_1, global::x.ae, "worldCorners");
		if (array == null)
		{
			return null;
		}
		if (A_0 == null)
		{
			global::u.b("NO Camera!");
			return null;
		}
		Vector3 a_ = A_0.WorldToScreenPoint(array[0]);
		Vector3 vector = A_0.WorldToScreenPoint(array[1]);
		Vector3 a_2 = A_0.WorldToScreenPoint(array[2]);
		Vector3 vector2 = A_0.WorldToScreenPoint(array[3]);
		float height = global::x.a(a_, vector);
		float width = global::x.a(vector, a_2);
		global::u.d(string.Concat(new object[]
		{
			"Screen Height = ",
			Screen.height,
			" Width = ",
			Screen.width
		}));
		Point point = new Point(vector.x, (float)Screen.height - vector.y);
		new Point(vector2.x, (float)Screen.height - vector2.y);
		return new Rectangle(point.X, point.Y, width, height);
	}

	public static bool a(GameObject A_0, string A_1)
	{
		return ReflectionTools.SetComponentAttribute(A_0, global::x.ah, "value", A_1);
	}

	public static Component[] c()
	{
		UnityEngine.Object[] array = global::x.a(global::x.a);
		if (array == null)
		{
			array = global::x.a(global::x.m);
		}
		if (array == null)
		{
			global::u.c("GetUIRootGameObjects => can not find, UIRoot: " + global::x.a + ", and " + global::x.m);
			return null;
		}
		return array as Component[];
	}

	public static UnityEngine.Object[] a(string A_0)
	{
		Type type = Type.GetType(A_0);
		if (type == null)
		{
			global::u.b("Can't get =>" + A_0 + " type");
			return null;
		}
		UnityEngine.Object[] array = UnityEngine.Object.FindObjectsOfType(type);
		if (array != null)
		{
			global::u.d(string.Concat(new object[]
			{
				"Find Object by type:",
				A_0,
				" num:",
				array.Length
			}));
		}
		else
		{
			global::u.d("Find Object by type:" + A_0 + " num:0");
		}
		return array;
	}

	public static Type b()
	{
		Type type = null;
		try
		{
			type = Type.GetType(global::x.b);
		}
		catch (Exception)
		{
			global::u.c("Unknow type " + global::x.b);
		}
		if (type != null)
		{
			return type;
		}
		try
		{
			type = Type.GetType(global::x.n);
		}
		catch (Exception)
		{
			global::u.c("Unknow type " + global::x.n);
		}
		return type;
	}

	public static GameObject b(Point A_0)
	{
		Point pt = CoordinateTool.ConvertMobile2Unity(A_0);
		Vector2 vector = CoordinateTool.ConvertPoint2Vector(pt);
		bool flag = false;
		return global::x.a(vector, ref flag);
	}

	public static GameObject a(Point A_0)
	{
		Vector2 vector = CoordinateTool.ConvertPoint2Vector(A_0);
		bool flag = false;
		return global::x.a(vector, ref flag);
	}

	public static bool a(GameObject A_0, ref Vector2 A_1)
	{
		if (A_0 == null)
		{
			return false;
		}
		s s = new s();
		Camera a_ = s.h(A_0);
		Rectangle rectangle = s.c(a_, A_0);
		if (rectangle == null)
		{
			return false;
		}
		Vector2 vector = default(Vector2);
		vector.x = rectangle.x + rectangle.width / 2f;
		vector.y = (float)Screen.height - (rectangle.y + rectangle.height / 2f);
		A_1.x = vector.x;
		A_1.y = vector.y;
		global::u.c(string.Concat(new object[]
		{
			"Test raycast point (",
			vector.x,
			" , ",
			vector.y,
			")"
		}));
		bool flag = false;
		GameObject gameObject = global::x.a(vector, ref flag);
		if (gameObject != null)
		{
			global::u.d("Raycast GameObject " + gameObject.name);
		}
		if (flag)
		{
			global::u.d("Invaild Raycast");
			return true;
		}
		return gameObject == A_0;
	}

	public static bool a(GameObject A_0, ref Rectangle A_1)
	{
		if (A_0 == null)
		{
			return false;
		}
		s s = new s();
		Camera a_ = s.h(A_0);
		Rectangle rectangle = s.c(a_, A_0);
		if (rectangle == null)
		{
			return false;
		}
		Vector2 vector = default(Vector2);
		vector.x = rectangle.x + rectangle.width / 2f;
		vector.y = (float)Screen.height - (rectangle.y + rectangle.height / 2f);
		A_1.x = rectangle.x;
		A_1.y = (float)Screen.height - rectangle.y;
		A_1.height = rectangle.height;
		A_1.width = rectangle.width;
		global::u.c(string.Concat(new object[]
		{
			"Test raycast point (",
			vector.x,
			" , ",
			vector.y,
			")"
		}));
		bool flag = false;
		GameObject gameObject = global::x.a(vector, ref flag);
		if (gameObject != null)
		{
			global::u.d("Raycast GameObject " + gameObject.name);
		}
		if (flag)
		{
			global::u.d("Invaild Raycast");
			return true;
		}
		return gameObject == A_0;
	}

	public static void a(Type A_0)
	{
		MethodInfo[] methods = A_0.GetMethods(BindingFlags.Static | BindingFlags.Public);
		global::u.c("Find Methods number " + methods.Length);
		MethodInfo[] array = methods;
		for (int i = 0; i < array.Length; i++)
		{
			MethodInfo methodInfo = array[i];
			global::u.c("Name = " + methodInfo.Name);
			MethodAttributes arg_49_0 = methodInfo.Attributes;
			ParameterInfo[] parameters = methodInfo.GetParameters();
			ParameterInfo[] array2 = parameters;
			for (int j = 0; j < array2.Length; j++)
			{
				ParameterInfo parameterInfo = array2[j];
				global::u.c("Arg type " + parameterInfo.ParameterType.FullName);
			}
		}
	}

	public static GameObject a(Vector3 A_0, ref bool A_1)
	{
		try
		{
			A_1 = false;
			Type type = global::x.b();
			GameObject result;
			if (type == null)
			{
				global::u.b("Find UICamera type failed!");
				result = null;
				return result;
			}
			MethodInfo method = type.GetMethod("Raycast", new Type[]
			{
				typeof(Vector3)
			});
			bool flag;
			if (method != null)
			{
				flag = (bool)method.Invoke(null, new object[]
				{
					A_0
				});
			}
			else
			{
				method = type.GetMethod("Raycast", BindingFlags.Static | BindingFlags.Public, null, new Type[]
				{
					typeof(Vector3),
					typeof(RaycastHit).MakeByRefType()
				}, null);
				if (method == null)
				{
					global::u.a("No Raycast Method");
					result = null;
					return result;
				}
				RaycastHit raycastHit = default(RaycastHit);
				flag = (bool)method.Invoke(null, new object[]
				{
					A_0,
					raycastHit
				});
			}
			global::u.d("Raycast result " + (flag ? "True" : "False"));
			FieldInfo field = type.GetField("hoveredObject");
			if (field != null)
			{
				global::u.d("Find hoveredObject");
				object value = field.GetValue(null);
				if (value != null)
				{
					result = (value as GameObject);
					return result;
				}
			}
			field = type.GetField("mRayHitObject", BindingFlags.Static | BindingFlags.NonPublic);
			if (field != null)
			{
				global::u.d("Find mRayHitObject");
				object value2 = field.GetValue(null);
				if (value2 != null)
				{
					result = (value2 as GameObject);
					return result;
				}
			}
			result = null;
			return result;
		}
		catch (Exception ex)
		{
			global::u.b(ex.Message + "\n" + ex.StackTrace);
		}
		return null;
	}

	public static List<UINode> a()
	{
		string[] array = new string[]
		{
			global::x.d,
			global::x.e,
			global::x.f
		};
		string[] array2 = new string[]
		{
			global::x.p,
			global::x.q,
			global::x.r
		};
		HashSet<int> hashSet = new HashSet<int>();
		List<UINode> list = new List<UINode>();
		Rectangle rect = new Rectangle();
		for (int i = 0; i < array.Length; i++)
		{
			Type type = Type.GetType(array[i]);
			if (type == null)
			{
				type = Type.GetType(array2[i]);
			}
			if (type != null)
			{
				Component[] array3 = UnityEngine.Object.FindObjectsOfType(type) as Component[];
				Component[] array4 = array3;
				for (int j = 0; j < array4.Length; j++)
				{
					Component component = array4[j];
					GameObject gameObject = component.gameObject;
					global::u.d("Find GameObject " + gameObject.name);
					if (!hashSet.Contains(gameObject.GetInstanceID()) && global::x.a(gameObject, ref rect))
					{
						Rectangle bound = CoordinateTool.ConvertUnity2Mobile(rect);
						UINode item = new UINode(gameObject, bound);
						hashSet.Add(gameObject.GetInstanceID());
						list.Add(item);
					}
				}
			}
		}
		return list;
	}

	public static bool a(GameObject A_0)
	{
		if (A_0 == null)
		{
			return false;
		}
		Type[] array = new Type[]
		{
			global::x.ab,
			global::x.ac,
			global::x.ad
		};
		Type[] array2 = array;
		for (int i = 0; i < array2.Length; i++)
		{
			Type type = array2[i];
			Component componentInParent = A_0.GetComponentInParent(type);
			if (componentInParent != null)
			{
				return true;
			}
		}
		return false;
	}
}
